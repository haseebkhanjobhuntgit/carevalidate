type Post {
  id: ID!
  slug: String!
  title: String!
  excerpt: String
  content: String!
  coverImage: String
  publishedAt: DateTime!
  updatedAt: DateTime
  readingTime: Int!
  author: Author!
  categories: [Category!]!
  tags: [Tag!]!

  relatedPosts(limit: Int = 3): [Post!]!
}

type Author {
  id: ID!
  slug: String!
  name: String!
  bio: String
  avatarUrl: String
}

type Category {
  id: ID!
  slug: String!
  name: String!
  description: String
}

type Tag {
  id: ID!
  slug: String!
  name: String!
  postsCount: Int!
}

type PostConnection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [PostEdge!]!
}

type PostEdge {
  cursor: String!
  node: Post!
}

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
  endCursor: String
}

type Query {
  posts(
    filter: PostFilterInput
    sort: PostSort = PUBLISHED_AT_DESC
    first: Int = 12
    after: String
    last: Int
    before: String
  ): PostConnection!

  post(slug: String!): Post

  categories: [Category!]!

  tags: [Tag!]!

  author(slug: String!): Author
}

input PostFilterInput {
  term: String
  categorySlug: String
  tagSlugs: [String!]
  authorSlug: String
  publishedBefore: DateTime
  publishedAfter: DateTime
}

enum PostSort {
  PUBLISHED_AT_DESC
  PUBLISHED_AT_ASC
  TITLE_ASC
  TITLE_DESC
}

scalar DateTime
